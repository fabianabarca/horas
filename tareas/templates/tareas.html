{% extends 'base.html' %} {% load crispy_forms_tags %} {% block main %} {% load static %}
<div class="container">
</br>
  <h1>Tareas</h1>
  <a href="crear_tarea" class="btn btn-info" role="button">Agregar Tarea</a>
  <button type="button" class="btn btn-info" onclick="esconderFiltros()">Ver Filtros</button>
</br>
</br>
<div id="filtrosdiv" style = 'display: none;'>
<form method="post">
  {% csrf_token %}
  <input type="hidden" name="next" value="{{ next }}" />

 
  <div class="row">
  {% for field in filtros_form  %}
    <div class="col-sm-4">
      <b>{{ field.label_tag }}</b> - {{ field}} 
    </br>

    </div>
</br>
  {% endfor %}

 
  </div>  
  <button type="submit" style = 'width: 200px; height:40px;' class="btn btn-primary btn-block">Filtrar</button>
 

  
</form>
</br>
</div>


<form method="post">{% csrf_token %}
  {% if tareas %}
  <div class="table-responsive">
    <table id="datatable" class="table table-striped table-bordered">
    <thead class="thead">
      <tr>
        <th scope="col">Nombre</th>
        <th scope="col">Descripción</th>
        <th scope="col">Proyecto</th>
        <th scope="col">Categorias</th>
        <th scope="col">Carné</th>
        <th scope="col">Nombre</th>
        <th scope="col">Apellido</th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      {% for tarea in tareas %}
         {% if not tarea.enPapelera %}
      <tr>
        <td>{{ tarea.nombre }}</td>
        <td>{{ tarea.descripcion}}</td>
        {% if not tarea.proyecto.enPapelera %}
            <td>{{ tarea.proyecto}}</td>
        {% else %}  
            <td></td>
        {% endif %}
        <!--Categorias multiples-->
        <td>
          {% for categoria in tarea.proyecto.categoria.all %}
             {% if not categoria.enPapelera %}
                 {{ categoria.nombre}}<br/>
              {% endif %}
          {% endfor %}
        </td>
        <!--usuarios multiples-->
        <td>
          {% for estudiante in tarea.estudiante.all %}
             
                 {{ estudiante.user.username}}<br/>
              
          {% endfor %}
        </td>
        <!--nombres multiples-->
        <td>
          {% for estudiante in tarea.estudiante.all %}
            
                 {{ estudiante.user.first_name}}<br/>
            
          {% endfor %}
        </td>
        <!--apellidos multiples-->
        <td>
          {% for estudiante in tarea.estudiante.all %}
            
                 {{ estudiante.user.last_name}}<br/>
         
          {% endfor %}
        </td>
<!--
        <td>{{ tarea.estudiante.user.username}}</td>
        <td>{{ tarea.estudiante.user.first_name}}</td>
        <td>{{ tarea.estudiante.user.last_name}}</td>
-->
        <td style="text-align: center">
          <div >
            <a   href="editar_tarea/{{ tarea.id }}"class="btn btn-info" role="button">
              <img  class="imageButtons" src="{% static '/svg/file-edit-line.svg' %}" />
            </a>
            <button onclick="return confirm('Está seguro de borrar?')"  type="submit" style="background-color:crimson;" class="btn btn-info"  value="{{ tarea.id }}"  name="deleteButton">              
              <img class="imageButtons" src="{% static '/svg/delete-bin-line.svg' %}" />
            </button>
            <button onclick="return confirm('Está seguro de enviar?')"  type="submit" style="background-color:green;" class="btn btn-info"  value="{{ tarea.id }}"  name="assignButton">              
              <img class="imageButtons" src="{% static '/svg/delete-bin-line.svg' %}" />
            </button>
          </div>
        </td>
      </tr>
         {% endif %}
      {% endfor %}
  </tbody>
    </table>
  </div>
    {% else %}
  <strong>No hay tareas registradas</strong>
{% endif %}
</form>
</div>
{% endblock %}



